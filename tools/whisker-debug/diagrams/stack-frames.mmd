graph TD
    subgraph "Stack Frame Representation"
        subgraph "Navigation History"
            P1["START<br/>Entry Point"]
            P2["Chapter1<br/>Called from START"]
            P3["Combat<br/>Called from Chapter1"]
            P4["PlayerWins<br/>Current Passage"]
        end

        P1 --> P2
        P2 --> P3
        P3 --> P4
    end

    subgraph "DAP Stack Frames"
        F1["Frame 1<br/>id: 1<br/>name: PlayerWins<br/>source: story.ink:42<br/>CURRENT"]
        F2["Frame 2<br/>id: 2<br/>name: Combat<br/>source: story.ink:35"]
        F3["Frame 3<br/>id: 3<br/>name: Chapter1<br/>source: story.ink:10"]
        F4["Frame 4<br/>id: 4<br/>name: START<br/>source: story.ink:1"]

        F1 --> F2
        F2 --> F3
        F3 --> F4
    end

    subgraph "Scopes per Frame"
        S1["Globals<br/>variablesReference: 1000"]
        S2["Locals (PlayerWins)<br/>variablesReference: 2001"]
        S3["Temps<br/>variablesReference: 3001"]

        F1 -.-> S1
        F1 -.-> S2
        F1 -.-> S3
    end

    subgraph "Variables"
        V1["player_health: 85"]
        V2["enemy_defeated: true"]
        V3["_temp_damage: 15"]

        S1 -.-> V1
        S2 -.-> V2
        S3 -.-> V3
    end
